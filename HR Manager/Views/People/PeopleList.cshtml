
@model IEnumerable<HR_Manager.Models.Person>


@{
    ViewBag.Title = "Baza personalna";
    Layout = "~/Views/Shared/_Layout.cshtml";
}


<div class="container">

    <div class="jumbotron">
        <h1>@ViewBag.Title</h1>
    </div>

    <p>
        <a href="@Url.Action("Index", "Home")" type="button" class="btn btn-default">Strona główna</a>
        <a href="@Url.Action("Create", "People")" type="button" class="btn btn-default">Dodaj kandydata</a>
    </p>
    <hr />

    @using (Ajax.BeginForm("SelectPersonList", "Peopple", new AjaxOptions
    {
        HttpMethod = "POST",
        UpdateTargetId = "candidatePanelList",
        InsertionMode = InsertionMode.Replace

    }, new { @class = "form-inline", role = "form" }))
    {
        @Html.AntiForgeryToken()



        <label for="candidateSearch">Szukaj kandydatów:</label>
            <input type="text" class="form-control" id="candidateSearch" name="candidateSearch" data-autocomplete-url="@Url.Action("FindPerson","People")">
            <input type="submit" value="Szukaj" class="btn btn-default" id="btn-candidateSearch" />


    }

    <div class="panel panel-default">
        <div class="panel-heading"><strong>Kandydaci</strong></div>
        @if (Model.Count() > 0)
        {
            <div class="panel-body" id="candidatePanelList">
                @Html.Partial("_SelectedPeopleList", Model)
            </div>
        }
        else
        {
            <p>Brak kandydatów w bazie personalnej</p>
        }
    </div>

</div>
@section scripts
{
<script type="text/javascript" language="javascript">
    $(document).ready(function () {
        $('*[data-autocomplete-url]')
            .each(function () {
                $(this).autocomplete({
                    source: $(this).data("autocomplete-url"),

                    select: function (event, ui) {
                        $("#btn-candidateSearch").click();
                    }

                });
            });
    });

</script>
}